# 频道组功能实现

## 概述

本次修改为Jellyfin Web前端添加了对频道组显示的支持，允许用户在后端新增的频道组接口基础上，在前端按频道组来组织和显示频道。

## 新增功能

### 1. 频道组API Hook
- **文件**: `src/hooks/api/liveTvHooks/useGetChannelGroups.ts`
- **功能**: 提供频道组数据的获取接口
- **接口**: `/LiveTv/Channels/Groups`

### 2. 频道组显示组件
- **文件**: `src/components/channelGroups/ChannelGroupsView.tsx`
- **功能**: React组件，用于按频道组显示频道
- **特性**: 
  - 支持按频道组分组显示
  - 显示每个组的频道数量
  - 响应式设计

### 3. 频道列表控制器增强
- **文件**: `src/controllers/livetv/livetvchannels.js`
- **功能**: 在传统频道列表基础上添加频道组显示支持
- **新增功能**:
  - 切换按钮：在传统列表和频道组显示之间切换
  - 频道组HTML渲染
  - 状态管理

### 4. UI界面更新
- **文件**: `src/controllers/livetv.html`
- **功能**: 在频道列表页面添加切换按钮
- **位置**: 过滤器按钮旁边

### 5. 样式文件
- **文件**: `src/styles/channelGroups.scss`
- **功能**: 频道组显示的样式定义
- **特性**:
  - 频道组标题样式
  - 响应式布局
  - 深色/浅色主题适配
  - 切换按钮样式

### 6. 国际化支持
- **文件**: `src/strings/zh-cn.json`
- **新增字符串**:
  - `ChannelGroups`: "频道组"
  - `ShowChannelGroups`: "显示频道组"
  - `ShowChannelList`: "显示频道列表"
  - `ToggleChannelGroups`: "切换频道组显示"

## 使用方法

### 1. 频道列表页面
1. 进入电视直播 -> 频道
2. 在页面顶部找到切换按钮（列表图标）
3. 点击按钮在传统列表和频道组显示之间切换

### 2. 频道组显示
- 频道按组分类显示
- 每个组显示组名和频道数量
- 频道以卡片形式展示
- 支持点击播放

### 3. 传统列表显示
- 保持原有的频道列表显示方式
- 所有频道平铺显示

## 技术实现

### API调用
```javascript
// 频道组接口
GET /LiveTv/Channels/Groups?userId={userId}&startIndex={startIndex}&limit={limit}

// 响应格式
[
  {
    "Name": "新闻频道",
    "TotalCount": 5,
    "Channels": [...]
  }
]
```

### 状态管理
- 使用`useChannelGroups`状态来控制显示模式
- 切换时自动重新加载数据
- 按钮状态同步更新

### 样式系统
- 使用SCSS模块化样式
- 支持主题切换
- 响应式设计适配不同屏幕

## 兼容性

- 向后兼容：不影响现有的频道列表功能
- 渐进增强：新功能作为可选功能提供
- 响应式：支持桌面和移动设备

## 测试

可以使用提供的测试页面 `test-channel-groups.html` 来验证功能：
1. 打开测试页面
2. 点击切换按钮
3. 观察频道组和传统列表的显示效果

## 注意事项

1. 需要后端支持新的频道组接口
2. 确保API返回的数据格式正确
3. 在低带宽环境下可能需要优化加载性能
4. 建议在生产环境中进行充分测试

## 未来改进

1. 添加频道组排序功能
2. 支持自定义频道组
3. 添加频道组搜索功能
4. 优化移动端体验
5. 添加更多显示选项 